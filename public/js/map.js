var st =
	'200\n' +
	'0 0 0\n' +
	'1 95 52\n' +
	'2 263 21\n' +
	'3 401 26\n' +
	'4 480 31\n' +
	'5 761 42\n' +
	'6 846 45\n' +
	'7 940 33\n' +
	'8 68 112\n' +
	'9 145 110\n' +
	'10 352 99\n' +
	'11 400 92\n' +
	'12 444 91\n' +
	'13 530 96\n' +
	'14 613 70\n' +
	'15 690 63\n' +
	'16 780 97\n' +
	'17 930 125\n' +
	'18 35 141\n' +
	'19 105 150\n' +
	'20 189 128\n' +
	'21 279 159\n' +
	'22 412 170\n' +
	'23 476 132\n' +
	'24 583 130\n' +
	'25 630 141\n' +
	'26 694 97\n' +
	'27 700 130\n' +
	'28 737 123\n' +
	'29 848 140\n' +
	'30 986 150\n' +
	'31 59 172\n' +
	'32 154 191\n' +
	'33 232 174\n' +
	'34 359 188\n' +
	'35 431 210\n' +
	'36 459 208\n' +
	'37 503 166\n' +
	'38 609 174\n' +
	'39 656 164\n' +
	'40 723 187\n' +
	'41 753 177\n' +
	'42 934 185\n' +
	'43 14 210\n' +
	'44 112 229\n' +
	'45 186 239\n' +
	'46 240 221\n' +
	'47 300 203\n' +
	'48 376 240\n' +
	'49 484 243\n' +
	'50 539 212\n' +
	'51 632 208\n' +
	'52 684 197\n' +
	'53 732 226\n' +
	'54 768 214\n' +
	'55 856 217\n' +
	'56 967 229\n' +
	'57 60 255\n' +
	'58 137 256\n' +
	'59 160 275\n' +
	'60 202 269\n' +
	'61 262 282\n' +
	'62 298 273\n' +
	'63 383 301\n' +
	'64 433 291\n' +
	'65 479 281\n' +
	'66 507 275\n' +
	'67 576 258\n' +
	'68 649 255\n' +
	'69 703 243\n' +
	'70 767 262\n' +
	'71 848 260\n' +
	'72 913 261\n' +
	'73 47 290\n' +
	'74 79 321\n' +
	'75 127 309\n' +
	'76 188 304\n' +
	'77 218 337\n' +
	'78 276 326\n' +
	'79 313 319\n' +
	'80 396 338\n' +
	'81 468 350\n' +
	'82 495 332\n' +
	'83 557 312\n' +
	'84 617 282\n' +
	'85 650 298\n' +
	'86 713 310\n' +
	'87 778 317\n' +
	'88 800 329\n' +
	'89 843 315\n' +
	'90 886 312\n' +
	'91 961 302\n' +
	'92 23 353\n' +
	'93 27 380\n' +
	'94 87 363\n' +
	'95 120 357\n' +
	'96 260 387\n' +
	'97 294 376\n' +
	'98 330 364\n' +
	'99 378 363\n' +
	'100 446 378\n' +
	'101 507 358\n' +
	'102 596 326\n' +
	'103 652 319\n' +
	'104 713 343\n' +
	'105 868 353\n' +
	'106 924 366\n' +
	'107 976 372\n' +
	'108 857 416\n' +
	'109 309 434\n' +
	'110 370 393\n' +
	'111 387 415\n' +
	'112 407 402\n' +
	'113 468 413\n' +
	'114 526 395\n' +
	'115 589 368\n' +
	'116 714 408\n' +
	'117 793 435\n' +
	'118 714 456\n' +
	'119 951 459\n' +
	'120 24 513\n' +
	'121 60 512\n' +
	'122 111 507\n' +
	'123 233 495\n' +
	'124 302 477\n' +
	'125 426 444\n' +
	'126 555 418\n' +
	'127 634 441\n' +
	'128 756 573\n' +
	'129 786 465\n' +
	'130 411 483\n' +
	'131 441 465\n' +
	'132 523 448\n' +
	'133 600 503\n' +
	'134 668 480\n' +
	'135 814 487\n' +
	'136 932 531\n' +
	'137 203 537\n' +
	'138 326 514\n' +
	'139 405 517\n' +
	'140 525 501\n' +
	'141 630 514\n' +
	'142 713 525\n' +
	'143 782 517\n' +
	'144 38 600\n' +
	'145 69 597\n' +
	'146 119 591\n' +
	'147 161 578\n' +
	'148 202 572\n' +
	'149 250 564\n' +
	'150 296 552\n' +
	'151 315 574\n' +
	'152 348 538\n' +
	'153 371 567\n' +
	'154 456 545\n' +
	'155 478 587\n' +
	'156 534 587\n' +
	'157 579 590\n' +
	'158 656 560\n' +
	'159 664 661\n' +
	'160 807 582\n' +
	'161 885 581\n' +
	'162 976 580\n' +
	'163 112 612\n' +
	'164 160 611\n' +
	'165 263 626\n' +
	'166 352 602\n' +
	'167 429 616\n' +
	'168 460 637\n' +
	'169 531 630\n' +
	'170 575 620\n' +
	'171 869 732\n' +
	'172 729 631\n' +
	'173 837 657\n' +
	'174 924 626\n' +
	'175 967 662\n' +
	'176 16 662\n' +
	'177 63 652\n' +
	'178 138 641\n' +
	'179 223 655\n' +
	'180 275 663\n' +
	'181 327 651\n' +
	'182 347 662\n' +
	'183 402 635\n' +
	'184 502 670\n' +
	'185 556 701\n' +
	'186 617 695\n' +
	'187 687 698\n' +
	'188 791 688\n' +
	'189 64 718\n' +
	'190 108 746\n' +
	'191 177 697\n' +
	'192 180 756\n' +
	'193 316 697\n' +
	'194 329 714\n' +
	'195 368 713\n' +
	'196 428 680\n' +
	'197 439 719\n' +
	'198 657 754\n' +
	'199 806 767';
window.onload = (event) => {
	setPoints(100);
};

function setPoints(zoom) {
	var arr = st.split('\n');
	var scroll_zoom = new ScrollZoom($('#main'), 4, 0.5);

	for (var i = 2; i < arr.length; i++) {
		var newArr = arr[i].split(' ');
		$('#point_' + i.toString()).remove();

		// top: 37px;
		// left: 80px;
		// width: 20px;
		// height: 20px;
		// border: 5px solid red;
		// border-radius: 15px;

		let insideDiv = document.createElement('div');
		insideDiv.classList.add('insideDiv');
		insideDiv.style.width = '' + (30 * zoom) / 100 + 'px';
		insideDiv.style.height = '' + (30 * zoom) / 100 + 'px';
		insideDiv.style.borderRadius = '' + (15 * zoom) / 100 + 'px';
		insideDiv.style.borderWidth = '' + (5 * zoom) / 100 + 'px';
		insideDiv.style.top = ((newArr[2] - 15) * zoom) / 100;
		insideDiv.style.left = ((newArr[1] - 14) * zoom) / 100;
		var newI = i - 1;
		insideDiv.id = 'point_' + newI.toString();
		insideDiv.onclick = function () {
			insideDiv.style.borderColor = 'red';
		};

		document.querySelector('#mainDiv').appendChild(insideDiv);
	}
}

function ScrollZoom(container, max_scale, factor) {
	var target = container.children().first();
	var size = { w: target.width(), h: target.height() };
	var pos = { x: 0, y: 0 };
	var zoom_target = { x: 0, y: 0 };
	var zoom_point = { x: 0, y: 0 };
	var scale = 1;
	target.css('transform-origin', '0 0');
	target.on('mousewheel DOMMouseScroll', scrolled);

	function scrolled(e) {
		var offset = container.offset();
		zoom_point.x = e.pageX - offset.left;
		zoom_point.y = e.pageY - offset.top;

		e.preventDefault();
		var delta = e.delta || e.originalEvent.wheelDelta;
		if (delta === undefined) {
			//we are on firefox
			delta = e.originalEvent.detail;
		}
		delta = Math.max(-1, Math.min(1, delta)); // cap the delta to [-1,1] for cross browser consistency

		// determine the point on where the slide is zoomed in
		zoom_target.x = (zoom_point.x - pos.x) / scale;
		zoom_target.y = (zoom_point.y - pos.y) / scale;

		// apply zoom
		scale += delta * factor * scale;
		scale = Math.max(1, Math.min(max_scale, scale));

		// calculate x and y based on zoom
		pos.x = -zoom_target.x * scale + zoom_point.x;
		pos.y = -zoom_target.y * scale + zoom_point.y;

		// Make sure the slide stays in its container area when zooming out
		if (pos.x > 0) pos.x = 0;
		if (pos.x + size.w * scale < size.w) pos.x = -size.w * (scale - 1);
		if (pos.y > 0) pos.y = 0;
		if (pos.y + size.h * scale < size.h) pos.y = -size.h * (scale - 1);

		update();
	}

	function update() {
		target.css(
			'transform',
			'translate(' +
				pos.x +
				'px,' +
				pos.y +
				'px) scale(' +
				scale +
				',' +
				scale +
				')'
		);
	}
}

function handleClick(cb) {
	if (cb.checked) {
		$('#logBox').show();
		$('#mrxBoard').hide();
	} else {
		$('#logBox').hide();
		$('#mrxBoard').show();
	}
	//console.log('Clicked, new value = ' + cb.checked);
}

function handleZoom(event) {
	event.preventDefault();
	var zoom = parseInt($('#inputZoom')[0].value);
	console.log(zoom);
	var width = (zoom * 1018) / 100;
	var height = (zoom * 809) / 100;
	$('#mainDiv').css('width', width.toString() + 'px');
	$('#mainDiv').css('height', height.toString() + 'px');
	setPoints(zoom);
}
